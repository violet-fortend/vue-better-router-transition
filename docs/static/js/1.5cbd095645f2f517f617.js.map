{"version":3,"sources":["webpack:///src/pages/compositeImage/index.vue","webpack:///./src/pages/compositeImage/index.vue?84a1","webpack:///./src/pages/compositeImage/index.vue","webpack:///./node_modules/composite-image/dist/bundle.js"],"names":["compositeImage","name","created","image","bundle_default","a","bgWidth","bgHeight","composite","src","x","y","width","height","then","print","console","log","download","pages_compositeImage","render","_h","this","$createElement","_self","_c","staticClass","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__","__generator","thisArg","body","f","t","g","_","label","sent","trys","ops","next","verb","throw","return","Symbol","iterator","n","v","op","TypeError","call","done","value","pop","length","push","e","step","CompositeImage","config","Error","window","canvas","document","createElement","ctx","getContext","prototype","_arguments","P","generator","args","_i","arguments","images","imgSrcs","_this","_a","map","url","Image","test","setAttribute","Promise","resolve","reject","onload","onerror","all","ele","i","_b","_d","_e","drawImage","fulfilled","rejected","result","apply","type","toDataURL","fileName","toBlob","blob","Date","now","style","display","href","URL","createObjectURL","appendChild","click","removeChild","module","exports"],"mappings":"8HASAA,GACAC,KAAA,iBACAC,QAFA,WAGA,IAAAC,EAAA,IAAAC,EAAAC,GACAC,QAAA,IACAC,SAAA,MAkBAJ,EAAAK,WAfAC,IAAA,gFACAC,EAAA,EACAC,EAAA,EACAC,MAAA,IACAC,OAAA,MAIAJ,IAAA,iGACAC,EAAA,GACAC,EAAA,GACAC,MAAA,IACAC,OAAA,MAGAC,KAAA,WACAX,EAAAY,QACAC,QAAAC,IAAAd,EAAA,SACAA,EAAAe,SAAA,iBChCeC,GADEC,OAFjB,WAA0B,IAAaC,EAAbC,KAAaC,eAAkD,OAA/DD,KAAuCE,MAAAC,IAAAJ,GAAwB,OAAiBK,YAAA,6BAEzFC,oBCCjB,IAcAC,EAdyBC,EAAQ,OAcjCC,CACE9B,EACAmB,GATF,EAVA,SAAAY,GACEF,EAAQ,SAaV,kBAEA,MAUeG,EAAA,QAAAJ,EAAiB;;;;;;;;;;;;;;gFCiBhC,SAAAK,EAAAC,EAAAC,GACA,IASAC,EACAzB,EACA0B,EACAC,EAZAC,GACAC,MAAA,EACAC,KAAA,WACA,KAAAJ,EAAA,SAAAA,EAAA,GACA,OAAAA,EAAA,IAEAK,QACAC,QAMA,OAAAL,GACAM,KAAAC,EAAA,GACAC,MAAAD,EAAA,GACAE,OAAAF,EAAA,IACG,mBAAAG,SAAAV,EAAAU,OAAAC,UAAA,WACH,OAAA3B,OACGgB,EAEH,SAAAO,EAAAK,GACA,gBAAAC,GACA,OAIA,SAAAC,GACA,GAAAhB,EAAA,UAAAiB,UAAA,mCAEA,KAAAd,GAAA,IACA,GAAAH,EAAA,EAAAzB,IAAA0B,EAAA,EAAAe,EAAA,GAAAzC,EAAA,OAAAyC,EAAA,GAAAzC,EAAA,SAAA0B,EAAA1B,EAAA,SAAA0B,EAAAiB,KAAA3C,GAAA,GAAAA,EAAAiC,SAAAP,IAAAiB,KAAA3C,EAAAyC,EAAA,KAAAG,KAAA,OAAAlB,EAGA,OAFA1B,EAAA,EAAA0B,IAAAe,GAAA,EAAAA,EAAA,GAAAf,EAAAmB,QAEAJ,EAAA,IACA,OACA,OACAf,EAAAe,EACA,MAEA,OAEA,OADAb,EAAAC,SAEAgB,MAAAJ,EAAA,GACAG,MAAA,GAGA,OACAhB,EAAAC,QACA7B,EAAAyC,EAAA,GACAA,GAAA,GACA,SAEA,OACAA,EAAAb,EAAAI,IAAAc,MAEAlB,EAAAG,KAAAe,MAEA,SAEA,QACA,KAAApB,KAAAE,EAAAG,MAAAgB,OAAA,GAAArB,IAAAqB,OAAA,UAAAN,EAAA,QAAAA,EAAA,KACAb,EAAA,EACA,SAGA,OAAAa,EAAA,MAAAf,GAAAe,EAAA,GAAAf,EAAA,IAAAe,EAAA,GAAAf,EAAA,KACAE,EAAAC,MAAAY,EAAA,GACA,MAGA,OAAAA,EAAA,IAAAb,EAAAC,MAAAH,EAAA,IACAE,EAAAC,MAAAH,EAAA,GACAA,EAAAe,EACA,MAGA,GAAAf,GAAAE,EAAAC,MAAAH,EAAA,IACAE,EAAAC,MAAAH,EAAA,GAEAE,EAAAI,IAAAgB,KAAAP,GAEA,MAGAf,EAAA,IAAAE,EAAAI,IAAAc,MAEAlB,EAAAG,KAAAe,MAEA,SAGAL,EAAAjB,EAAAmB,KAAApB,EAAAK,GACK,MAAAqB,GACLR,GAAA,EAAAQ,GACAjD,EAAA,EACK,QACLyB,EAAAC,EAAA,EAGA,KAAAe,EAAA,SAAAA,EAAA,GACA,OACAI,MAAAJ,EAAA,GAAAA,EAAA,UACAG,MAAA,GAhFAM,EAAAX,EAAAC,MA2GA,IAAAW,EAEA,WACA,SAAAA,EAAAC,GACA,KAAAzC,gBAAAwC,GACA,UAAAE,MAAA,+EAGA,uBAAAC,OACA,UAAAD,MAAA,0DAGA1C,KAAA4C,OAAAC,SAAAC,cAAA,UACA9C,KAAA4C,OAAAtD,MAAAmD,EAAAzD,QACAgB,KAAA4C,OAAArD,OAAAkD,EAAAxD,SACAe,KAAA+C,IAAA/C,KAAA4C,OAAAI,WAAA,MACAhD,KAAAyC,SA4FA,OA/EAD,EAAAS,UAAA/D,UAAA,WAGA,IAFA,IA5LA0B,EAAAsC,EAAAC,EAAAC,EA4LAC,KAEAC,EAAA,EAAoBA,EAAAC,UAAAnB,OAAuBkB,IAC3CD,EAAAC,GAAAC,UAAAD,GAGA,OAlMA1C,EAkMAZ,KAlMAkD,OAkMA,EAlMAE,EAkMA,WACA,IAAAI,EAAAC,EAEAC,EAAA1D,KAEA,OAAAW,EAAAX,KAAA,SAAA2D,GACA,OAAAA,EAAAzC,OACA,OACA,KAAAlB,gBAAAwC,GACA,UAAAE,MAAA,kBAQA,OAJAe,GADAD,EAAAH,GACAO,IAAA,SAAAD,GACA,IArEAE,EACAhF,EAoEAM,EAAAwE,EAAAxE,IACA,OAtEA0E,EAsEA1E,EArEAN,EAAA,IAAA8D,OAAAmB,MAEA,QAAAC,KAAAF,IACAhF,EAAAmF,aAAA,2BAGAnF,EAAAM,IAAA0E,EACA,IAAAI,QAAA,SAAAC,EAAAC,GACAtF,EAAAuF,OAAA,WACA,OAAAF,EAAArF,IAGAA,EAAAwF,QAAA,WACA,OAAAH,EAAA,YA0DA,EAEAD,QAAAK,IAAAb,IAEA,OAiBA,OAhBAE,EAAAxC,OACAyC,IAAA,SAAAW,EAAAC,GACA,GAAAD,EAAA,CACA,IAAAZ,EAAAH,EAAAgB,GACAC,EAAAd,EAAAvE,EACAA,OAAA,IAAAqF,EAAA,EAAAA,EACAtE,EAAAwD,EAAAtE,EACAA,OAAA,IAAAc,EAAA,EAAAA,EACAuE,EAAAf,EAAArE,MACAA,OAAA,IAAAoF,EAAA,EAAAA,EACAC,EAAAhB,EAAApE,OACAA,OAAA,IAAAoF,EAAA,EAAAA,EAEAjB,EAAAX,IAAA6B,UAAAL,EAAAnF,EAAAC,EAAAC,EAAAC,OAGA,OAvOA,KADA4D,OAkMA,KAjMAA,EAAAc,UAAA,SAAAC,EAAAC,GACA,SAAAU,EAAA3C,GACA,IACAK,EAAAa,EAAA9B,KAAAY,IACO,MAAAI,GACP6B,EAAA7B,IAIA,SAAAwC,EAAA5C,GACA,IACAK,EAAAa,EAAA,MAAAlB,IACO,MAAAI,GACP6B,EAAA7B,IAIA,SAAAC,EAAAwC,GACAA,EAAA9C,KAAAiC,EAAAa,EAAA7C,OAAA,IAAAiB,EAAA,SAAAe,GACAA,EAAAa,EAAA7C,SACO1C,KAAAqF,EAAAC,GAGPvC,GAAAa,IAAA4B,MAAApE,EAAAsC,QAAA5B,WAyNAkB,EAAAS,UAAAxD,MAAA,SAAAwF,GACA,KAAAjF,gBAAAwC,GACA,UAAAE,MAAA,kBAGA,OAAA1C,KAAA4C,OAAAsC,UAAAD,GAAA,QAIAzC,EAAAS,UAAArD,SAAA,SAAAuF,GACA,KAAAnF,gBAAAwC,GACA,UAAAE,MAAA,kBAGA1C,KAAA4C,OAAAwC,OAAA,SAAAC,GACA,IAAAtG,EAAA8D,SAAAC,cAAA,KACA/D,EAAAa,SAAAuF,GAAAG,KAAAC,MAAA,OACAxG,EAAAyG,MAAAC,QAAA,OACA1G,EAAA2G,KAAAC,IAAAC,gBAAAP,GACAxC,SAAAhC,KAAAgF,YAAA9G,GACAA,EAAA+G,QACAjD,SAAAhC,KAAAkF,YAAAhH,MAIAyD,EA1GA,GA6GAwD,EAAAC,QAAAzD","file":"static/js/1.5cbd095645f2f517f617.js","sourcesContent":["<template>\n  <div class=\"composite-image-wrapper\">\n\n  </div>\n</template>\n\n<script>\nimport CompositeImage from 'composite-image'\n\nexport default {\n  name: 'CompositeImage',\n  created () {\n    const image = new CompositeImage({\n      bgWidth: 300, // 合成后图片的宽度\n      bgHeight: 400 // 合成后图片的高度\n    })\n    const cfg1 = {\n      src: 'https://bpic.588ku.com/back_pic/19/04/14/bf310e139cf9fc16b3c032caccf6804a.jpg',\n      x: 0,\n      y: 0,\n      width: 300,\n      height: 300\n    }\n\n    const cfg2 = {\n      src: 'https://ss1.bdstatic.com/70cFvXSh_Q1YnxGkpoWK1HF6hhy/it/u=1805103632,2396162225&fm=26&gp=0.jpg',\n      x: 90,\n      y: 70,\n      width: 116,\n      height: 116\n    }\n    // 合并操作，可支持传入多个图片\n    image.composite(cfg1, cfg2).then(() => {\n      image.print() // 图片地址dataUrl格式，可传入生成图片类型，默认'png'\n      console.log(image, 'image')\n      image.download('image.png') // 将已生成图片下载至本地，可传入导出的文件名\n    })\n  }\n}\n</script>\n\n<style scoped>\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/compositeImage/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"composite-image-wrapper\"})}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-e666b576\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/compositeImage/index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-e666b576\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-e666b576\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-e666b576\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/compositeImage/index.vue\n// module id = null\n// module chunks = ","'use strict';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\nfunction __awaiter(thisArg, _arguments, P, generator) {\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : new P(function (resolve) {\n        resolve(result.value);\n      }).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n}\nfunction __generator(thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function () {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n\n        case 7:\n          op = _.ops.pop();\n\n          _.trys.pop();\n\n          continue;\n\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n\n            _.ops.push(op);\n\n            break;\n          }\n\n          if (t[2]) _.ops.pop();\n\n          _.trys.pop();\n\n          continue;\n      }\n\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n}\n\n/**\r\n * @description generate HTMLImageElement\r\n */\nfunction getImage(url) {\n  var image = new window.Image();\n\n  if (/^http/.test(url)) {\n    image.setAttribute('crossOrigin', 'anonymous');\n  }\n\n  image.src = url;\n  return new Promise(function (resolve, reject) {\n    image.onload = function () {\n      return resolve(image);\n    };\n\n    image.onerror = function () {\n      return resolve(null);\n    };\n  });\n}\n\nvar CompositeImage =\n/** @class */\nfunction () {\n  function CompositeImage(config) {\n    if (!(this instanceof CompositeImage)) {\n      throw new Error('CompositeImage is a constructor and should be called with the `new` keyword');\n    }\n\n    if (typeof window === 'undefined') {\n      throw new Error('run env error, CompositeImage should be runing browser');\n    }\n\n    this.canvas = document.createElement('canvas');\n    this.canvas.width = config.bgWidth;\n    this.canvas.height = config.bgHeight;\n    this.ctx = this.canvas.getContext('2d');\n    this.config = config;\n  }\n  /**\r\n   * @description composite image\r\n   * @param {object} config\r\n   * @param config.src image source\r\n   * @param config.width image width\r\n   * @param config.height image height\r\n   * @param config.x position x\r\n   * @param config.y position y\r\n   */\n\n\n  CompositeImage.prototype.composite = function () {\n    var args = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args[_i] = arguments[_i];\n    }\n\n    return __awaiter(this, void 0, void 0, function () {\n      var images, imgSrcs, imgEles;\n\n      var _this = this;\n\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            if (!(this instanceof CompositeImage)) {\n              throw new Error('instance error');\n            }\n\n            images = args;\n            imgSrcs = images.map(function (_a) {\n              var src = _a.src;\n              return getImage(src);\n            });\n            return [4\n            /*yield*/\n            , Promise.all(imgSrcs)];\n\n          case 1:\n            imgEles = _a.sent();\n            imgEles.map(function (ele, i) {\n              if (ele) {\n                var _a = images[i],\n                    _b = _a.x,\n                    x = _b === void 0 ? 0 : _b,\n                    _c = _a.y,\n                    y = _c === void 0 ? 0 : _c,\n                    _d = _a.width,\n                    width = _d === void 0 ? 0 : _d,\n                    _e = _a.height,\n                    height = _e === void 0 ? 0 : _e;\n\n                _this.ctx.drawImage(ele, x, y, width, height);\n              }\n            });\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  }; // print canvas DataURL\n\n\n  CompositeImage.prototype.print = function (type) {\n    if (!(this instanceof CompositeImage)) {\n      throw new Error('instance error');\n    }\n\n    return this.canvas.toDataURL(type || 'png');\n  }; // file download\n\n\n  CompositeImage.prototype.download = function (fileName) {\n    if (!(this instanceof CompositeImage)) {\n      throw new Error('instance error');\n    }\n\n    this.canvas.toBlob(function (blob) {\n      var a = document.createElement('a');\n      a.download = fileName || Date.now() + \".png\";\n      a.style.display = 'none';\n      a.href = URL.createObjectURL(blob);\n      document.body.appendChild(a);\n      a.click();\n      document.body.removeChild(a);\n    });\n  };\n\n  return CompositeImage;\n}();\n\nmodule.exports = CompositeImage;\n//# sourceMappingURL=bundle.js.map\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/composite-image/dist/bundle.js\n// module id = yRuv\n// module chunks = 1"],"sourceRoot":""}